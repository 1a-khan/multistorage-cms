<div class="card" id="upload-status-card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <span>Current Version</span>
    {% if document.current_version %}
      {% if document.current_version.upload_state == 'PENDING' or document.current_version.upload_state == 'UPLOADING' %}
        <span class="badge text-bg-warning">Polling</span>
      {% endif %}
    {% endif %}
  </div>
  <div class="card-body">
    {% if document.current_version %}
      <p><strong>Version:</strong> v{{ document.current_version.version_number }}</p>
      <p>
        <strong>State:</strong>
        {% if document.current_version.upload_state == 'READY' %}
          <span class="badge text-bg-success">READY</span>
        {% elif document.current_version.upload_state == 'FAILED' %}
          <span class="badge text-bg-danger">FAILED</span>
        {% elif document.current_version.upload_state == 'UPLOADING' %}
          <span class="badge text-bg-primary">UPLOADING</span>
        {% else %}
          <span class="badge text-bg-warning text-dark">PENDING</span>
        {% endif %}
      </p>
      <p class="mb-0"><strong>Stored location (URI/path):</strong><br><code>{{ document.current_version.storage_key }}</code></p>
      <p class="mt-2 mb-0 text-muted small">This is backend storage location metadata, not a public download URL.</p>
      {% if document.current_version.uploaded_at %}
        <p class="mt-2 mb-0"><strong>Uploaded at:</strong> {{ document.current_version.uploaded_at }}</p>
      {% endif %}
      {% if document.current_version.error_message %}
        <p class="mt-2 mb-0"><strong>Error:</strong> <span class="text-danger">{{ document.current_version.error_message }}</span></p>
      {% endif %}
    {% else %}
      <p class="text-muted mb-0">No version assigned.</p>
    {% endif %}
  </div>
</div>
